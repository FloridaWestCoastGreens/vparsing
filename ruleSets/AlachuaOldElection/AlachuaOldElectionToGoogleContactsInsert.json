{
  "name": "AlachuaOldElectionToGoogleContactsInsert",
  "rule": "INSERT INTO GoogleContactMatches\n(\n\t`Name`,\n\t`Given Name`,\n\t`Additional Name`,\n\t`Family Name`,\n\t`Yomi Name`,\n\t`Given Name Yomi`,\n\t`Additional Name Yomi`,\n\t`Family Name Yomi`,\n\t`Name Prefix`,\n\t`Name Suffix`,\n\t`Initials`,\n\t`Nickname`,\n\t`Short Name`,\n\t`Maiden Name`,\n\t`Birthday`,\n\t`Gender`,\n\t`Location`,\n\t`Billing Information`,\n\t`Directory Server`,\n\t`Mileage`,\n\t`Occupation`,\n\t`Hobby`,\n\t`Sensitivity`,\n\t`Priority`,\n\t`Subject`,\n\t`Notes`,\n\t`Group Membership`,\n\t`E-mail 1 - Type`,\n\t`E-mail 1 - Value`,\n\t`Phone 1 - Type`,\n\t`Phone 1 - Value`,\n\t`Phone 2 - Type`,\n\t`Phone 2 - Value`,\n\t`Address 1 - Type`,\n\t`Address 1 - Formatted`,\n\t`Address 1 - Street`,\n\t`Address 1 - City`,\n\t`Address 1 - PO Box`,\n\t`Address 1 - Region`,\n\t`Address 1 - Postal Code`,\n\t`Address 1 - Country`,\n\t`Address 1 - Extended Address`,\n\t`Address 2 - Type`,\n\t`Address 2 - Formatted`,\n\t`Address 2 - Street`,\n\t`Address 2 - City`,\n\t`Address 2 - PO Box`,\n\t`Address 2 - Region`,\n\t`Address 2 - Postal Code`,\n\t`Address 2 - Country`,\n\t`Address 2 - Extended Address`,\n\t`Custom Field 1 - Type`,\n\t`Custom Field 1 - Value`,\n\t`Custom Field 2 - Type`,\n\t`Custom Field 2 - Value`,\n\t`Custom Field 3 - Type`,\n\t`Custom Field 3 - Value`,\n\t`Custom Field 4 - Type`,\n\t`Custom Field 4 - Value`,\n\t`Custom Field 5 - Type`,\n\t`Custom Field 5 - Value`,\n\t`Custom Field 6 - Type`,\n\t`Custom Field 6 - Value`,\n\t`Custom Field 7 - Type`,\n\t`Custom Field 7 - Value`,\n\t`Custom Field 8 - Type`,\n\t`Custom Field 8 - Value`\n)\nSELECT \n`Name`,\n`Given Name`,\n`Additional Name`,\n`Family Name`,\n`Yomi Name`,\n`Given Name Yomi`,\n`Additional Name Yomi`,\n`Family Name Yomi`,\n`Name Prefix`,\n`Name Suffix`,\n`Initials`,\n`Nickname`,\n`Short Name`,\n`Maiden Name`,\nDATE_FORMAT(`Birthday`,'%Y-%m-%d') AS `Birthday`,\n`Gender`,\n`Location`,\n`Billing Information`,\n`Directory Server`,\n`Mileage`,\n`Occupation`,\n`Hobby`,\n`Sensitivity`,\n`Priority`,\n`Subject`,\n`Notes`,\n`Group Membership`,\n`E-mail 1 - Type`,\n`E-mail 1 - Value`,\n`Phone 1 - Type`,\n`Phone 1 - Value`,\n`Phone 2 - Type`,\n`Phone 2 - Value`,\nIF(LENGTH(`Address 1 - Street`) < 1,'','* Voter Registration') AS `Address 1 - Type`,\nIF(LENGTH(`Address 1 - Street`) < 1,'',CONCAT_WS(', ',`Address 1 - Street`,`Address 1 - City`,`Address 1 - Region`,`Address 1 - Postal Code`)) AS `Address 1 - Formatted`,\n`Address 1 - Street`,\n`Address 1 - City`,\n`Address 1 - PO Box`,\n`Address 1 - Region`,\n`Address 1 - Postal Code`,\n`Address 1 - Country`,\n`Address 1 - Extended Address`,\nIF(LENGTH(`Address 2 - Street`) < 1,'','* Voter Registration Mailing') AS `Address 2 - Type`,\nIF(LENGTH(`Address 2 - Street`) < 1,'',CONCAT_WS(', ',`Address 2 - Street`,`Address 2 - City`,`Address 2 - Region`,`Address 2 - Postal Code`)) AS `Address 2 - Formatted`,\n`Address 2 - Street`,\n`Address 2 - City`,\n`Address 2 - PO Box`,\n`Address 2 - Region`,\n`Address 2 - Postal Code`,\n`Address 2 - Country`,\n`Address 2 - Extended Address`,\n`Custom Field 1 - Type`,\n`Custom Field 1 - Value`,\n`Custom Field 2 - Type`,\n`Custom Field 2 - Value`,\n`Custom Field 3 - Type`,\n`Custom Field 3 - Value`,\n'Voter Registration Name' AS `Custom Field 4 - Type`,\n`Name` AS `Custom Field 4 - Value`,\n`Custom Field 5 - Type`,\n`Custom Field 5 - Value`,\n`Custom Field 6 - Type`,\n`Custom Field 6 - Value`,\n`Custom Field 7 - Type`,\nDATE_FORMAT(`Custom Field 7 - Value`,'%Y-%m-%d') AS `Custom Field 7 - Value`,\n`Custom Field 8 - Type`,\nDATE_FORMAT(`Custom Field 8 - Value`,'%Y-%m-%d') AS `Custom Field 8 - Value`\nFROM (\n\tSELECT \n\tIF(LENGTH(`Name Suffix`) > 0,CONCAT_WS(', ',IF(LENGTH(TRIM(`Additional Name`)) > 0,CONCAT_WS(' ',`Given Name`,`Additional Name`,`Family Name`),CONCAT_WS(' ',`Given Name`,`Family Name`)),`Name Suffix`) ,IF(LENGTH(TRIM(`Additional Name`)) >0,CONCAT_WS(' ',`Given Name`,`Additional Name`,`Family Name`),CONCAT_WS(' ',`Given Name`,`Family Name`))) AS Name,\n\t`Given Name`,\n\t`Additional Name`,\n\t`Family Name`,\n\t'' AS `Yomi Name`,\n\t'' AS `Given Name Yomi`,\n\t'' AS `Additional Name Yomi`,\n\t'' AS `Family Name Yomi`,\n\t`Name Prefix`,\n\t`Name Suffix`,\n\t'' AS `Initials`,\n\t'' AS `Nickname`,\n\t'' AS `Short Name`,\n\t'' AS `Maiden Name`,\n\t`Birthday`,\n\t`Gender2` AS `Gender`,\n\t'' AS `Location`,\n\t'' AS `Billing Information`,\n\t'' AS `Directory Server`,\n\t'' AS `Mileage`,\n\t'' AS `Occupation`,\n\t'' AS `Hobby`,\n\t'' AS `Sensitivity`,\n\t'' AS `Priority`,\n\t'' AS `Subject`,\n\t'' AS `Notes`,\n\tCONCAT_WS('','',county_code,' Voter Data ::: * My Contacts ::: ',county_code,' - ',`Address 1 - City`,' ',`Party`,'s ::: FL CongressionalDistrict ',`Congressional District`,' ::: FL SenateDistrict ',`Senate District`,' ::: FL HouseDistrict ',`House District`,' ::: FL JudicialDistrict ',`Judicial District`,' ::: FL JudicialCircuit ',`Judicial Circuit`) AS `Group Membership`,\n\tIF(`E-mail 1 - Value` IS NULL,'','* Other') AS `E-mail 1 - Type`,\n\tIF(`E-mail 1 - Value` IS NULL,'',`E-mail 1 - Value`) AS `E-mail 1 - Value`,\n\tIF(`Phone 1 - Value` IS NULL,'','Home') AS `Phone 1 - Type`,\n\tIF(`Phone 1 - Value` IS NULL,'',`Phone 1 - Value`) AS `Phone 1 - Value`,\n\tIF(`Phone 2 - Value` IS NULL,'','Voter Registration') AS `Phone 2 - Type`,\n\tIF(`Phone 2 - Value` IS NULL,'',`Phone 2 - Value`) AS `Phone 2 - Value`,\n\t`Address 1 - Street`,\n\t`Address 1 - City`,\n\t'' AS `Address 1 - PO Box`,\n\t`Address 1 - Region`,\n\t`Address 1 - Postal Code`,\n\t'' AS `Address 1 - Country`,\n\t'' AS `Address 1 - Extended Address`,\n\t`Address 2 - Street`,\n\t`Address 2 - City`,\n\t'' AS `Address 2 - PO Box`,\n\t`Address 2 - Region`,\n\t`Address 2 - Postal Code`,\n\t'' AS `Address 2 - Country`,\n\t'' AS `Address 2 - Extended Address`,\n\t'County' AS `Custom Field 1 - Type`,\n\t`County` AS `Custom Field 1 - Value`,\n\t'Voter ID' AS `Custom Field 2 - Type`,\n\t`Voter ID` AS `Custom Field 2 - Value`,\n\tIF(LENGTH(`Party`) < 1,'','Party') AS `Custom Field 3 - Type`,\n\tIF(LENGTH(`Party`) < 1,'',`Party`) AS `Custom Field 3 - Value`,\n\tIF(LENGTH(`Custom Field 5 - Value`) < 1,'','Race') AS `Custom Field 5 - Type`,\n\tIF(LENGTH(`Custom Field 5 - Value`) < 1,'',`Custom Field 5 - Value`) AS `Custom Field 5 - Value`,\n\tIF(LENGTH(`Custom Field 6 - Value`) < 1,'','Voter Status') AS `Custom Field 6 - Type`,\n\tIF(LENGTH(`Custom Field 6 - Value`) < 1,'',`Custom Field 6 - Value`) AS `Custom Field 6 - Value`,\n\tIF(LENGTH(`Custom Field 7 - Value`) < 1,'','Registration Date') AS `Custom Field 7 - Type`,\n\tIF(LENGTH(`Custom Field 7 - Value`) < 1,'',`Custom Field 7 - Value`) AS `Custom Field 7 - Value`,\n\tIF(LENGTH(`Custom Field 8 - Value`) < 1,'','Last Updated') AS `Custom Field 8 - Type`,\n\tIF(LENGTH(`Custom Field 8 - Value`) < 1,'',`Custom Field 8 - Value`) AS `Custom Field 8 - Value`\n\tFROM (\n\t\tSELECT \n\t\tproper(name_first) AS `Given Name`,\n\t\tIF(LENGTH(name_middle) = 1,UPPER(name_middle),proper(name_middle)) AS `Additional Name`,\n\t\tproper(name_last) AS `Family Name`,\n\t\t'' AS `Name Prefix`,\n\t\tIF(LEFT(name_suffix,1) = 'I',name_suffix,proper(name_suffix)) AS`Name Suffix`,\n\t\tbirth_date AS `BirthDay`,\n\t\tgender AS Gender2,\n\t\t`County`,\n\t\tcounty_code,\n\t\tcongressional_district AS `Congressional District`,\n\t\tsenate_district AS `Senate District`,\n\t\thouse_district  AS `House District`,\n\t\tCASE\n\t\tWHEN county_code IN('ALA','BAK','BAY','BRA','CAL','CLA','CLM','DIX','DUV','ESC','FRA','GAD','GIL','GUL','HAM','HOL','JAC','JEF','LAF','LEO','LEV','LIB','MAD','NAS','OKA','SAN','SUW','TAY','UNI','WAK','WAL','WAS') THEN 1\n\t\tWHEN county_code IN('CHA','CLL','DES','GLA','HAR','HEN','HIG','HIL','LEE','MAN','PAS','PIN','POL','SAR') THEN 2\n\t\tWHEN county_code IN('DAD','MON') THEN 3\n\t\tWHEN county_code IN('BRO','IND','MRT','OKE','PAL','STL') THEN 4\n\t\tWHEN county_code IN('BRE','CIT','FLA','HER','LAK','MRN','ORA','OSC','PUT','SEM','STJ','SUM','VOL') THEN 5\n\t\tELSE 0\n\t\tEND AS `Judicial District`,\n\t\tCASE\n\t\tWHEN county_code IN('ESC','OKA','SAN','WAL') THEN 1\n\t\tWHEN county_code IN('FRA','GAD','JEF','LEO','LIB','WAK') THEN 2\n\t\tWHEN county_code IN('CLM','DIX','HAM','LAF','MAD','SUW','TAY') THEN 3\n\t\tWHEN county_code IN('CLA','DUV','NAS') THEN 4\n\t\tWHEN county_code IN('CIT','HER','LAK','MRN','SUM') THEN 5\n\t\tWHEN county_code IN('PAS','PIN') THEN 6\n\t\tWHEN county_code IN('FLA','PUT','STJ','VOL') THEN 7\n\t\tWHEN county_code IN('ALA','BAK','BRA','GIL','LEV','UNI') THEN 8\n\t\tWHEN county_code IN('ORA','OSC') THEN 9\n\t\tWHEN county_code IN('HAR','HIG','POL') THEN 10\n\t\tWHEN county_code IN('DAD') THEN 11\n\t\tWHEN county_code IN('DES','MAN','SAR') THEN 12\n\t\tWHEN county_code IN('HIL') THEN 13\n\t\tWHEN county_code IN('BAY','CAL','GUL','HOL','JAC','WAS') THEN 14\n\t\tWHEN county_code IN('PAL') THEN 15\n\t\tWHEN county_code IN('MON') THEN 16\n\t\tWHEN county_code IN('BRO') THEN 17\n\t\tWHEN county_code IN('BRE','SEM') THEN 18\n\t\tWHEN county_code IN('IND','MRT','OKE','STL') THEN 19\n\t\tWHEN county_code IN('CHA','CLL','GLA','HEN','LEE') THEN 20\n\t\tELSE 0\n\t\tEND AS `Judicial Circuit`,\n\t\t`E-mail 1 - Value`,\n\t\t`Phone 1 - Value`,\n\t\t`Phone 2 - Value`,\n\t\tTRIM(CONCAT_WS(' ',proper(residence_address_line_1),proper(residence_address_line_2))) AS `Address 1 - Street`,\n\t\tproper(residence_city) AS `Address 1 - City`,\n\t\tIF(TRIM(residence_state) = '','FL',residence_state) AS `Address 1 - Region`,\n\t\tresidence_zipcode AS `Address 1 - Postal Code`,\n\t\tTRIM(CONCAT_WS(' ',proper(mailing_address_line_1),proper(mailing_address_line_2),proper(mailing_address_line_3))) AS `Address 2 - Street`,\n\t\tproper(mailing_city) AS `Address 2 - City`,\n\t\tmailing_state AS `Address 2 - Region`,\n\t\tmailing_zipcode AS `Address 2 - Postal Code`,\n\t\tvoter_id AS `Voter ID`,\n\t\t`County` AS `Custom Field 1 - Type`,\n\t\tCASE \n\t\tWHEN party_affiliation = 'AIP' THEN 'American'\n\t\tWHEN party_affiliation = 'CPF' THEN 'Constitution' \n\t\tWHEN party_affiliation = 'DEM' THEN 'Democrat'\n\t\tWHEN party_affiliation = 'ECO' THEN 'Ecology'\n\t\tWHEN party_affiliation = 'FPP' THEN 'Pirate'\n\t\tWHEN party_affiliation = 'FSW' THEN 'Socialist Worker'\n\t\tWHEN party_affiliation = 'GRE' THEN 'Green'\n\t\tWHEN party_affiliation = 'IDP' THEN 'Independence' \n\t\tWHEN party_affiliation = 'INT' THEN 'Independent'\n\t\tWHEN party_affiliation = 'JPF' THEN 'Justice'\n\t\tWHEN party_affiliation = 'LPF' THEN 'Libertarian'\n\t\tWHEN party_affiliation = 'PSL' THEN 'Socialism and Liberation'\n\t\tWHEN party_affiliation = 'PFP' THEN 'Peace & Freedom'\n\t\tWHEN party_affiliation = 'REF' THEN 'Reform'\n\t\tWHEN party_affiliation = 'REP' THEN 'Republican' \n\t\tWHEN party_affiliation = 'TPF' THEN 'Tea'\n\t\tELSE 'None'\n\t\tEND AS `Party`,\n\t\tCASE \n\t\tWHEN race = 1 THEN 'American Indian or Alaskan Native'\n\t\tWHEN race = 2 THEN 'Asian Or Pacific Islander'\n\t\tWHEN race = 3 THEN 'Black, Not Hispanic'\n\t\tWHEN race = 4 THEN 'Hispanic'\n\t\tWHEN race = 5 THEN 'White, Not Hispanic'\n\t\tWHEN race = 6 THEN 'Other'\n\t\tWHEN race = 7 THEN 'Multi-racial'\n\t\tWHEN race = 9 THEN 'Unknown'\n\t\tELSE 'Unknown'\n\t\tEND AS `Custom Field 5 - Value`,\n\t\tCASE\n\t\tWHEN voter_status = 'ACT' THEN 'Active'\n\t\tWHEN voter_status = 'INA' THEN 'Inactive'\n\t\tWHEN voter_status = 'PRE' THEN 'Preregister Minors (17 Years Of Age)'\n\t\tELSE 'Inactive'\n\t\tEND AS `Custom Field 6 - Value`,\n\t\tregistration_date AS `Custom Field 7 - Value`,\n\t\texport_date AS `Custom Field 8 - Value`\n\t\tFROM (\n\t\t\tSELECT vt.*,\n\t\t\tLOWER(m.Email_Address) AS `E-mail 1 - Value`,\n\t\t\tREPLACE(REPLACE(REPLACE(REPLACE(m.Telephone_Number, '(', ''),')',''),' ',''),'-','') AS `Phone 1 - Value`,\n\t\t\tCONCAT_WS('',vt.daytime_area_code,vt.daytime_phone_number) AS `Phone 2 - Value`,\n\t\t\t(SELECT CountyDescription FROM CountyCodes c WHERE c.CountyCode=vt.county_code LIMIT 1) AS `County`\n\t\t\tFROM Voters vt\n\t\t\tJOIN (\n\t\t\t\tSELECT v.voter_id,MAX(v.export_date) AS export_date\n\t\t\t\tFROM Voters v GROUP BY v.voter_id\n\t\t\t) AS mv ON vt.voter_id = mv.voter_id AND vt.export_date = mv.export_date\n\t\t\tJOIN `Exp20111018104918` AS m ON m.VoterID = vt.voter_id AND (TRIM(m.Telephone_Number) != '' OR TRIM(m.Email_Address) !='')\n\t\t) AS vtr WHERE TRIM(`Phone 1 - Value`) != TRIM(`Phone 2 - Value`) OR LENGTH(TRIM(`E-mail 1 - Value`)) > 1\n\t) AS vtr2\n) AS vtr3",
  "class": "edu.usf.RuleChains.SQLQuery"
}